@use "sass:math";

@import '~microscope-sass/lib/grid';
@import '~microscope-sass/lib/typography';

@import '../mixins/bem';
@import '../mixins/prefix';

$column-gap-size: $grid-margin-1;
$column-half-gap-size: math.div($column-gap-size, 2);

.#{prefix(columns)} {
  display: flex;
  flex-direction: row;

  .col {
    &--span-1 {
      @include bootstrap-span(max-width, 1);
    }
    &--span-2 {
      @include bootstrap-span(max-width, 2);
    }
    &--span-3 {
      @include bootstrap-span(max-width, 3);
    }
    &--span-4 {
      @include bootstrap-span(max-width, 4);
    }
    &--span-5 {
      @include bootstrap-span(max-width, 5);
    }
    &--span-6 {
      @include bootstrap-span(max-width, 6);
    }
    &--span-7 {
      @include bootstrap-span(max-width, 7);
    }
    &--span-8 {
      @include bootstrap-span(max-width, 8);
    }
    &--span-9 {
      @include bootstrap-span(max-width, 9);
    }
    &--span-10 {
      @include bootstrap-span(max-width, 10);
    }
    &--span-11 {
      @include bootstrap-span(max-width, 11);
    }
  }

  // ideally, we would use gap, but Opera doesn't support that yet with flexbox :(
  // Instead, we work around it by setting paddings on the child elements and negative
  // margins on the parent.
  // gap: $column-gap-size;

  // apply the negative margins to account for the first and last column paddings
  margin-left: -$column-half-gap-size;
  margin-right: -$column-half-gap-size;

  > * {
    flex: 1;
    padding-left: $column-half-gap-size;
    padding-right: $column-half-gap-size;
  }

}
