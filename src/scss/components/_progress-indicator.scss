@use 'microscope-sass/lib/bem';
@use './card';

@import '../mixins/prefix';

@mixin nested($classname) {
  .#{prefix($classname)} {
    @content;
  }
}

.openforms-progress-indicator {
  @include card.card('progress-indicator');

  // Do not display the toggle button on non-mobile devices
  @include bem.element('mobile-header') {
    display: none;
  }

  @include bem.element('nav') {
    display: flex;
    flex-direction: column;
    gap: var(--of-progress-indicator-nav-gap, 20px);
  }

  @include mobile-only {
    @include bem.element('mobile-header') {
      display: block;
    }

    // Hide by default on mobile
    @include bem.element('nav') {
      display: none;
    }
  }
}

// .#{prefix('progress-indicator')} {

//   @include bem.element('mobile-header') {
//     @include body;
//     @include body--big;
//     @include margin(-$grid-container-margin, $properties: margin-left);

//     // style for replacing div with a button for accessibility
//     background: none;
//     border: none;
//     padding: 0;
//     cursor: pointer;
//     width: calc(100% + $grid-container-margin);

//     @include show-on-mobile(flex);

//     align-items: center;

//     .fa-icon {
//       display: block;
//       flex-shrink: 0;
//       flex-basis: $grid-container-margin * 2;
//       text-align: center;
//     }
//   }

//   @include bem.element('form-title') {
//     @include ellipsis;
//     font-weight: bold;
//   }

//   // mobile styling for the progress indicator
//   @include mobile-only {
//     @include margin($grid-container-margin, $properties: (padding-top, padding-bottom));
//     box-shadow: var(--of-progress-indicator-mobile-box-shadow);
//     // otherwise the bar is too short, and setting a width creates a horizontal scrollbar
//     width: unset;

//     // style layout
//     @at-root .#{prefix('layout__row')} & {
//       @include margin(
//         calc(-1 * var(--of-progress-indicator-mobile-margin)),
//         $properties: (margin-left, margin-right)
//       );
//     }

//     @include nested('caption') {
//       @include margin(true, $properties: margin-top);
//       @include margin($grid-container-margin, $properties: margin-left);

//       @include mobile-only {
//         display: none;
//       }
//     }

//     @include nested('list') {
//       @include margin($grid-container-margin, $properties: margin-left);
//     }

//     @include bem.modifier('mobile-collapsed') {
//       @include nested('caption') {
//         display: none;
//       }

//       @include nested('list') {
//         display: none;
//       }
//     }
//   }
// }

// TODO: parametrize with design tokens
.openforms-progress-indicator-item {
  display: flex;
  justify-content: flex-start;

  @include bem.element('marker') {
    width: 1em;
    flex-shrink: 0;
  }

  @include bem.element('label') {
    flex-grow: 1;
    hyphens: auto;
  }
}
