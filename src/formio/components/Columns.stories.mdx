import { Canvas, Meta, Story, Props } from '@storybook/addon-docs';
import { FormioComponent, FormDecorator } from './story-util';

<Meta
  title="Form.io components/Columns"
  argTypes={{
    components: {
      type: { name: 'array' },
    },
  }}
  decorators={[FormDecorator]}
  parameters={{
    controls: { sort: 'requiredFirst' }
  }}
/>

# Columns

Columns are intended for simple grouping of components on a single line, e.g. a
postal code + house number combination.

Complex nested structures are out of scope, as aligning all the labels, inputs, help texts
and error messages is not trivial due to the possible absence of these components.

**Column width**

The column width is dictated by the `size` key, which should be an integer value between
`1` and `12` since we're using a 12-column grid.

On mobile, the default width is 100%, but you can tweak this using the optional
`sizeMobile` key, ranging between `1` and `4`.

## Default

export const Template = ({ components = [], ...args}) => (
  <FormioComponent components={components}/>
);

<Canvas>
  <Story name="Default" args={{ 
      components: [
        {
          key: 'cols1', 
          type: 'columns',
          label: 'Columns 1',
          columns: [
            {
              size: 4,
              components: [
                {
                  key: 'howManyDroidsDidYouDestroy',
                  type: 'textfield',
                  label: '# droids destroyed?',
                }
              ],
            },
            {
              size: 4,
              components: [
                {
                  key: 'whatAboutDroidekas',
                  type: 'textfield',
                  label: 'What about Droideka\'s?',
                },
              ],
            },
            {
              size: 4,
              components: [
                {
                  key: 'doYouTrustYourClones',
                  type: 'textfield',
                  label: 'Do you trust your clones?',
                },
              ],
            },
          ],
        },
        {
          key: 'isTheForceTrulyWithYou',
          type: 'textfield',
          label: 'Is the force truly with you?',
          description: 'Harum provident earum quod perferendis dolor tempora. Est ipsum molestiae dolor repellendus id omnis vel.',
        }
      ]
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

<Props story="Default" />

## Size control

export const SizeTemplate = ({ col1Size, col2Size, col1MobileSize, col2MobileSize, ...args }) => (
  <FormioComponent component={{
    id: 'columnsSize',
    type: 'columns',
    label: 'Column sizes',
    columns: [
      {
        size: col1Size,
        sizeMobile: col1MobileSize,
        components: [{type: 'content', html: `Size: ${col1Size}, mobile size: ${col1MobileSize || 'unset'}`}],
      },
      {
        size: col2Size,
        sizeMobile: col2MobileSize,
        components: [{type: 'content', html: `Size: ${col2Size}, mobile size: ${col2MobileSize || 'unset'}`}],
      }
    ]
  }}/>
);

<Canvas>
  <Story 
    name="Column sizes"
    argTypes={{
      col1Size: { 
        name: 'Size column 1',
        type: { required: true },
        control: { type: 'range', min: 1, max: 12, step: 1 }
      },
      col2Size: { 
        name: 'Size column 2',
        type: { required: true },
        control: { type: 'range', min: 1, max: 12, step: 1 }
      },
      col1MobileSize: { 
        name: 'Size on mobile column 1',
        control: { type: 'range', min: 0, max: 4, step: 1 }
      },
      col2MobileSize: { 
        name: 'Size on mobile column 2',
        control: { type: 'range', min: 0, max: 4, step: 1 }
      },
      components: {
        table: {
          disable: true,
        }
      }
    }}
    parameters={{
      controls: {sort: 'requiredFirst'}
    }}
    args={{
      col1Size: 8,
      col2Size: 4,
      col1MobileSize: 0,
      col2MobileSize: 0,
    }}
  >
    {SizeTemplate.bind({})}
  </Story>
</Canvas>

<Props story="Column sizes" />

## Address

<Canvas>
  <Story name="Address" args={{ 
      components: [
        {
          key: 'address',
          type: 'columns',
          label: 'Address columns',
          columns: [
            {
              size: 3,
              sizeMobile: 6,
              components: [
                {
                  key: 'postalCode',
                  type: 'postcode',
                  label: 'Postal code',
                }
              ],
            },
            {
              size: 3,
              sizeMobile: 6,
              components: [
                {
                  key: 'number',
                  type: 'textfield',
                  label: 'House number',
                },
              ],
            },
          ]
        }
      ]
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

<Props story="Address" />
