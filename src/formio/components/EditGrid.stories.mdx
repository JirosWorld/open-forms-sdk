import {Canvas, Meta, Story, ArgsTable} from '@storybook/addon-docs';
import {FormioComponent, FormDecorator} from './story-util';

<Meta
  title="Form.io components/EditGrid (Repeating group)"
  argTypes={{
    id: {
      type: {name: 'string'},
    },
    label: {
      type: {name: 'string', required: false},
    },
    maxLength: {
      type: {name: 'number', required: false},
    },
  }}
  decorators={[FormDecorator]}
  parameters={{
    controls: {sort: 'requiredFirst'},
  }}
/>

# Repeating Group / Herhalende groep

The `editGrid` component is used to capture structured data according to a certain sub-schema
where the number of repetitions can vary. The data is stored in a `Array` where each element's
data corresponds to the nested schema of the edit grid.

Form designers can freely design the components within the edit grid, while end-users have
the controls to add additional items to the data array. In the form designer, the grid starts
without any children (empty grid).

## Default

export const defaultNested = [
  {
    key: 'kleur',
    type: 'textfield',
    input: true,
    label: 'Kleur',
    registration: {
      attribute: '',
    },
    showInSummary: true,
    isSensitiveData: false,
    deriveStreetName: false,
  },
  {
    key: 'bedrag',
    type: 'currency',
    input: true,
    label: 'Waarde',
    currency: 'EUR',
    delimiter: true,
    allowNegative: false,
  },
];

export const Template = ({
  id = '',
  label = '',
  groupLabel = '',
  childComponents = [],
  description = '',
  maxLength = null,
  ...args
}) => (
  <FormioComponent
    component={{
      key: id,
      type: 'editgrid',
      input: true,
      hideLabel: false,
      label,
      components: childComponents,
      groupLabel,
      inlineEdit: false,
      description,
      isSensitiveData: false,
      validate: {maxLength},
      ...args,
    }}
  />
);

<Canvas>
  <Story name="Default" args={{
      id: 'repeating1',
      label: 'Auto\'s',
      groupLabel: 'Auto',
      childComponents: defaultNested,
      description: 'Herhalende groep voor data',
      disableAddingRemovingRows: false,
      addAnother: 'Nog één toevoegen',
      saveRow: 'Bevestigen',
      removeRow: 'Verwijderen',
      maxLength: null,
    }}>
    {Template.bind({})}
  </Story>
</Canvas>

<ArgsTable story="Default" />

