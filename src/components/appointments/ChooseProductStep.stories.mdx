import {ArgsTable, Canvas, Meta, Story} from '@storybook/addon-docs';
import {expect} from '@storybook/jest';
import {userEvent, within} from '@storybook/testing-library';

import {ConfigDecorator, FormikDecorator} from 'story-utils/decorators';

import ChooseProductStep from './ChooseProductStep';
import {mockAppointmentProductsGet} from './mocks';

export const Template = args => <ChooseProductStep {...args} />;

<Meta
  title="Private API / Appointments / Steps / Choose product"
  component={ChooseProductStep}
  decorators={[FormikDecorator, ConfigDecorator]}
  parameters={{
    formik: {
      initialValues: {
        products: [
          {
            product: '',
            amount: 1,
          },
        ],
      },
    },
    msw: {
      handlers: [mockAppointmentProductsGet],
    },
  }}
/>

## Choose product step

The appointment form allows making appointments for one or multiple products/services.

This component enables the UX to select the desired product and add additional products if desired.
At least one product must be provided.

<Canvas>
  <Story
    name="Empty state"
    args={{}}
    play={async ({canvasElement}) => {
      const canvas = within(canvasElement);
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Props

<ArgsTable of={ChooseProductStep} />
