import {Meta, Canvas, Story, ArgsTable} from '@storybook/addon-docs';

import {Layout, LayoutRow} from 'components/Layout';
import {ConfigDecorator, RouterDecorator} from 'story-utils/decorators';

import AppointmentForm from './AppointmentForm';
import {
  mockAppointmentProducts,
  mockAppointmentLocations,
  mockAppointmentDates,
  mockAppointmentTimes
} from './mocks';


export const PaddedDiv = ({className, children}) => (
  <div style={{padding: '1em 0'}} className={className}>{children}</div>
);

export const LayoutDecorator = (Story) => {
  return (
    <Layout component={PaddedDiv}>
      <LayoutRow>
        <Story />
      </LayoutRow>
    </Layout>
  );
};

<Meta
  title="Composites/Appointment form"
  component={AppointmentForm}
  parameters={{
    msw: {
      handlers: [
        mockAppointmentProducts,
        mockAppointmentLocations,
        mockAppointmentDates,
        mockAppointmentTimes
      ],
    },
  }}
/>

export const Template = () => {
  const form = {
    uuid: '81a22589-abce-4147-a2a3-62e9a56685aa',
    name: 'Mocked appointment form',
    showProgressIndicator: true,
    appointmentEnabled: true,
  };
  return (
      <AppointmentForm form={form}/>
  );
}

<Canvas>
  <Story
    name="Default"
    decorators={[ConfigDecorator, LayoutDecorator, RouterDecorator]}
    parameters={{
      docs: {
        source: {
          type: 'dynamic',
          excludeDecorators: true,
        },
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>


<ArgsTable of={AppointmentForm} />
