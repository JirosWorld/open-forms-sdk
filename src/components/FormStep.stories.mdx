import {Meta, Canvas, Story, ArgsTable} from '@storybook/addon-docs';

import {ConfigDecorator, RouterDecorator} from 'story-utils/decorators';
import {getForm, getSubmission} from 'story-utils/mocks';

import FormStep from './FormStep';

<Meta
  title="Private API/FormStep"
  component={FormStep}
  decorators={[ConfigDecorator, RouterDecorator]}
  argTypes={{}}
  parameters={{
    docs: {
      source: {
        type: 'dynamic',
        excludeDecorators: true,
      }
    }
  }}
/>

export const Template = (args) => (
  <FormStep
    form={getForm()}
    submission={getSubmission()}
    onLogicChecked={() => alert('logic checked')}
    onStepSubmitted={() => alert('step submitted')}
    onLogout={() => alert('logged out')}
  />
);

# FormStep component

The `FormStep` component is the heart of the application.

It fetches the (dynamic) configuration from the backend, reconciles it with the submission
data and ensures that the form fields are rendered by passing the configuration and data
down to the Formio form renderer.

The component depends on a React Router parent, as the requested form step is taken from
the URL parameters.

<Canvas>
  <Story
    name="Default"
    args={{
      routerArgs: {
        route: '/stap/:step',
        initialEntries: ['/stap/step-1'],
      },
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

## Props

<ArgsTable of={FormStep} />
